# Калькулятор с оркестратором и агентами

Этот проект представляет собой распределённую систему калькуляторов, состоящую из оркестратора и агентов. Оркестратор управляет задачами и распределяет их между агентами, которые выполняют вычисления. Проект написан на языке программирования Go и использует стандартные библиотеки для работы с HTTP и JSON.

## Архитектура

Система состоит из двух основных компонентов:

1. **Оркестратор**: Управляет потоком задач, распределяет их между агентами и отслеживает состояние каждого выражения.
2. **Агенты**: Получают задания от оркестратора, выполняют вычисления и отправляют результаты обратно.

## Установка и запуск

### Требования

- Go версии 1.16 или новее.

### Инструкции по установке

1. Клонируйте репозиторий:

```bash
git clone https://github.com/IlyaRogashev/calc_go.git
```

2. Перейдите в директорию проекта:

```bash
cd calc_go
```

3. Установите зависимости:

```bash
go mod tidy
```

### Запуск оркестратора

1. Настройте переменные окружения:

```bash
export SERVER_PORT=8000
```

2. Запустите оркестратора:

```bash
go run cmd/orchestrator_start/main.go
```

### Запуск агентов

1. Настройте переменные окружения:

```bash
export SERVER_URL="http://localhost:8000"
export COMPUTING_POWER=4
```

2. Запустите агентов:

```bash
go run cmd/agent_start/main.go
```

## Использование

### Эндпоинты оркестратора

Оркестратор предоставляет следующие эндпоинты:

#### Добавление вычисления арифметического выражения

```bash
curl --location 'localhost:8000/api/v1/calculate' \
--header 'Content-Type: application/json' \
--data '{
  "expression": "<строка с выражение>"
}'
```

#### Получение списка выражений

```bash
curl --location 'localhost:8000/api/v1/expressions'
```

#### Получение выражения по его идентификатору

```bash
curl --location 'localhost:8000/api/v1/expressions/<id>'
```

#### Получение задачи для выполнения

```bash
curl --location 'localhost:8000/internal/task'
```

#### Прием результата обработки данных

```bash
curl --location 'localhost:8000/internal/task' \
--header 'Content-Type: application/json' \
--data '{
  "id": 1,
  "result": 2.5
}'
```
Как то так)
